@page "/"
@using Microsoft.AspNetCore.Components.Authorization
@inject NavigationManager Navigation
@inject AuthenticationStateProvider AuthenticationStateProvider

<PageTitle>Home - JobBridge</PageTitle>

<!-- This is the home page -->
<AuthorizeView>
    <Authorized>
        @code {
            protected override async Task OnInitializedAsync()
            {
                var authState = await AuthenticationStateProvider.GetAuthenticationStateAsync();
                var user = authState.User;

                if (user.IsInRole("Admin"))
                {
                    Navigation.NavigateTo("/dashboard/admin");
                }
                else if (user.IsInRole("Employer"))
                {
                    Navigation.NavigateTo("/dashboard/employer/1");
                }
                else if (user.IsInRole("JobSeeker"))
                {
                    Navigation.NavigateTo("/dashboard/jobseeker/1");
                }
            }
        }
    </Authorized>
    <NotAuthorized>
        
            <!-- Hero Section -->
            <section class="section-container animate-fadeInUp">
                <div class="content">
                    <div class="grid grid-cols-2">
                        <div>
                            <!-- changed to H1 to WCAG rules -->
                            <h1 class="gradient-text">Find Your Dream Job with JobBridge</h1>
                            <p class="text-muted">Connect with top employers and discover opportunities that match your skills and ambitions.</p>
                            <div style="display: flex; gap: var(--space-3);">
                                <a href="/authentication" class="btn btn-gradient" aria-label="Get started with authentication">Get Started</a>
                                <a href="/job-listings" class="btn btn-secondary" aria-label="Browse job listings">Browse Jobs</a>
                            </div>
                        </div>
                        <div style="display: flex; align-items: center; justify-content: center;">
                            <div class="card" style="padding: var(--space-8); text-align: center;">
                                <h2 class="text-primary">1000+</h2>
                                <p>Active Jobs</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Features Section -->
            <section class="section-container animate-slide-in">
                <h2 class="gradient-text" style="text-align: center; margin-bottom: var(--space-8);">Why Choose JobBridge?</h2>
                <div class="grid grid-cols-3">
                    <div class="card">
                        <div class="card-body" style="text-align: center;">
                            <!-- role=img e aria-label -->
                            <div style="font-size: var(--font-size-4xl); color: var(--primary-500); margin-bottom: var(--space-3);" role="img" aria-label="Magnifying glass icon">
                                🔍
                            </div>
                            <!-- h3 to WCAG hierarchy -->
                            <h3>Easy Job Search</h3>
                            <p class="text-muted">Find jobs that match your skills with our advanced search filters.</p>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-body" style="text-align: center;">
                            <div style="font-size: var(--font-size-4xl); color: var(--primary-500); margin-bottom: var(--space-3);" role="img" aria-label="Office building icon">
                                🏢
                            </div>
                            <h3>Top Companies</h3>
                            <p class="text-muted">Connect with leading companies across various industries.</p>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-body" style="text-align: center;">
                            <div style="font-size: var(--font-size-4xl); color: var(--primary-500); margin-bottom: var(--space-3);" role="img" aria-label="Upwards trend chart icon">
                                📈
                            </div>
                            <h3>Career Growth</h3>
                            <p class="text-muted">Advance your career with opportunities that help you grow.</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- How It Works -->
            <section class="section-container">
                <h2 class="gradient-text" style="text-align: center; margin-bottom: var(--space-8);">How It Works</h2>
                <div class="grid grid-cols-4">
                    @for (int i = 1; i <= 4; i++)
                    {
                        var step = i switch
                        {
                            1 => ("Create Account", "Sign up as a job seeker or employer in minutes."),
                            2 => ("Complete Profile", "Add your skills, experience, and preferences."),
                            3 => ("Search & Apply", "Browse jobs and apply with one click."),
                            4 => ("Get Hired", "Connect with employers and land your dream job."),
                            _ => ("", "")
                        };

                        <div style="text-align: center;">
                            <div class="btn btn-gradient" style="width: 60px; height: 60px; border-radius: var(--radius-full); margin: 0 auto var(--space-3) auto; font-size: var(--font-size-2xl); pointer-events: none;" aria-hidden="true">
                                @i
                            </div>
                            <h3>@step.Item1</h3>
                            <p class="text-muted" style="font-size: var(--font-size-sm);">@step.Item2</p>
                        </div>
                    }
                </div>
            </section>

            <!-- Stats Section -->
            <section class="section-container bg-gradient" role="region" aria-label="Job statistics">
                <div class="grid grid-cols-4" style="text-align: center; color: white;">
                    <div>
                        <h2>1000+</h2>
                        <p>Active Jobs</p>
                    </div>
                    <div>
                        <h2>500+</h2>
                        <p >Companies</p>
                    </div>
                    <div>
                        <h2 style=>10,000+</h2>
                        <p style=>Job Seekers</p>
                    </div>
                    <div>
                        <h2>5000+</h2>
                        <p>Successful Hires</p>
                    </div>
                </div>
            </section>

            <!-- CTA Section -->
            <section class="section-container" style="text-align: center; background: var(--gradient-primary); color: white;">
                <h2 style="color: white; margin-bottom: var(--space-4);">Ready to Take the Next Step in Your Career?</h2>
                <p style="color: rgba(255,255,255,0.9); margin-bottom: var(--space-6);">Join thousands of professionals who have found their perfect job through JobBridge.</p>
                <div style="display: flex; gap: var(--space-3); justify-content: center;">
                    <a href="/authentication" class="btn btn-secondary" aria-label="Register now">Register Now</a>
                    <a href="/job-listings" class="btn" style="background: white; color: var(--primary-700);" aria-label="View all jobs">View All Jobs</a>
                </div>
            </section>

            <!-- For Employers Section -->
            <section class="section-container animate-slide-in">
                <div class="grid grid-cols-2">
                    <div>
                        <h2 class="gradient-text">For Employers</h2>
                        <p class="text-muted" style="margin-bottom: var(--space-4);">Find the perfect candidates for your open positions with our advanced matching system.</p>
                        <ul style="list-style: none; padding: 0;">
                            <li style="margin-bottom: var(--space-2);">Post unlimited job listings</li>
                            <li style="margin-bottom: var(--space-2);">Access qualified candidates</li>
                            <li style="margin-bottom: var(--space-2);">Manage applications easily</li>
                            <li style="margin-bottom: var(--space-2);">Track hiring analytics</li>
                        </ul>
                        <a href="/authentication" class="btn btn-gradient" aria-label="Start hiring">Start Hiring</a>
                    </div>
                    <div class="card" style="display: flex; align-items: center; justify-content: center; min-height: 300px;">
                        <div class="card-body" style="text-align: center;">
                            <div style="font-size: var(--font-size-5xl); margin-bottom: var(--space-3);" aria-hidden="true">💼</div>
                            <h3 class="text-primary">Hire Top Talent</h3>
                            <p class="text-muted">Connect with qualified professionals ready to join your team.</p>
                        </div>
                    </div>
                </div>
            </section>
        
    </NotAuthorized>
</AuthorizeView>
